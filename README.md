<div align="center">

<img src="https://github.com/Fredy-Fasbear-Industries/fredy-fasbear-prestamos/blob/main/BACKEND/assets/images/ICON.jpg" alt="Fredy Fasbear Logo" width="200"/>

# Fredy Fasbear Pr√©stamos

### Sistema Integral de Gesti√≥n de Empe√±os y Pr√©stamos

![Version](https://img.shields.io/badge/version-1.0.0-D4AF37?style=for-the-badge)
![License](https://img.shields.io/badge/license-CC%20BY--NC--ND%204.0-2C3E50?style=for-the-badge)
![Node](https://img.shields.io/badge/node-%3E%3D18.0.0-339933?style=for-the-badge&logo=node.js&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/postgresql-4169E1?style=for-the-badge&logo=postgresql&logoColor=white)

**Tu aliado financiero de confianza**

[Caracter√≠sticas](#-caracter√≠sticas) ‚Ä¢
[Instalaci√≥n](#-instalaci√≥n) ‚Ä¢
[Configuraci√≥n](#%EF%B8%8F-configuraci√≥n) ‚Ä¢
[Uso](#-uso) ‚Ä¢
[Documentaci√≥n](#-documentaci√≥n)

</div>

---

## üìã Descripci√≥n

**Fredy Fasbear Pr√©stamos** es un sistema completo y profesional para la gesti√≥n de casas de empe√±o y pr√©stamos. Permite administrar todo el ciclo de vida de pr√©stamos prendarios, desde la solicitud inicial hasta el pago final, con funcionalidades adicionales de e-commerce para la venta de art√≠culos no reclamados.

## ‚ú® Caracter√≠sticas

### üéØ Funcionalidades Principales

- **Gesti√≥n Completa de Pr√©stamos**
  - Solicitudes de pr√©stamo en l√≠nea
  - Evaluaci√≥n y aval√∫o de art√≠culos
  - Generaci√≥n autom√°tica de contratos
  - Firma digital de contratos
  - Sistema de pagos con validaci√≥n
  - Recibos en PDF con env√≠o por email

- **Multi-Rol de Usuarios**
  - üë§ **Clientes**: Solicitar pr√©stamos, realizar pagos, comprar en tienda
  - üîç **Evaluadores**: Avaluar art√≠culos, aprobar/rechazar solicitudes
  - üí∞ **Cobradores**: Validar pagos, gestionar cobranzas
  - üë®‚Äçüíº **Administradores**: Control total del sistema

- **E-Commerce Integrado**
  - Tienda en l√≠nea de art√≠culos
  - Carrito de compras
  - Gesti√≥n de pedidos
  - Sistema de pagos con transferencia bancaria
  - Estados de pedido en tiempo real

- **Sistema de Seguridad Robusto**
  - Autenticaci√≥n JWT
  - Verificaci√≥n de email
  - Recuperaci√≥n de contrase√±a
  - Rate limiting
  - Logs de auditor√≠a
  - Encriptaci√≥n de contrase√±as con bcrypt

- **Reportes y An√°lisis**
  - Dashboard con m√©tricas en tiempo real
  - Reportes de pr√©stamos
  - Reportes de pagos
  - Estad√≠sticas de ventas
  - Logs de actividad del sistema

- **Gesti√≥n Documental**
  - Carga de comprobantes de pago
  - Generaci√≥n de contratos PDF
  - Generaci√≥n de recibos PDF
  - Almacenamiento seguro de documentos
  - Sistema de backups automatizado

## üõ†Ô∏è Tecnolog√≠as Utilizadas

### Backend
- **Node.js** v18+ - Entorno de ejecuci√≥n
- **Express** v5 - Framework web
- **Prisma** - ORM para base de datos
- **PostgreSQL** - Base de datos relacional
- **JWT** - Autenticaci√≥n y autorizaci√≥n
- **PDFKit** - Generaci√≥n de documentos PDF
- **Resend** - Servicio de emails transaccionales
- **Bcrypt** - Encriptaci√≥n de contrase√±as
- **Multer** - Manejo de archivos
- **Express Rate Limit** - Protecci√≥n contra ataques

### Frontend
- **Nuxt 3** - Framework Vue.js
- **Vue 3** - Framework JavaScript reactivo
- **Pinia** - Gesti√≥n de estado
- **Chart.js** - Gr√°ficas y visualizaciones

### DevOps
- **Node Cron** - Tareas programadas
- **Compression** - Compresi√≥n de respuestas
- **Helmet** - Seguridad HTTP headers
- **Morgan** - Logging de peticiones HTTP
- **CORS** - Control de acceso entre dominios

## üì¶ Requisitos Previos

Antes de comenzar, aseg√∫rate de tener instalado:

- **Node.js** >= 18.0.0
- **npm** >= 8.0.0
- **PostgreSQL** >= 14.0
- **Git**

## üöÄ Instalaci√≥n

### 1. Clonar el Repositorio

```bash
git clone https://github.com/VonDefiant/fredy-fasbear-prestamos.git
cd fredy-fasbear-prestamos
```

### 2. Instalaci√≥n del Backend

```bash
cd BACKEND
npm install
```

### 3. Instalaci√≥n del Frontend

```bash
cd ../FRONTEND
npm install
```

## ‚öôÔ∏è Configuraci√≥n

### Backend (.env)

Crea un archivo `.env` en la carpeta `BACKEND/` con las siguientes variables:

```env
# Base de Datos
DATABASE_URL="postgresql://usuario:contrase√±a@localhost:5432/fredy_fasbear_db"

# JWT
JWT_SECRET="tu_clave_secreta_super_segura_aqui"
JWT_EXPIRES_IN="7d"

# Frontend URL
FRONTEND_URL="http://localhost:3000"

# Puerto del Servidor
PORT=3001

# Email (Resend)
RESEND_API_KEY="tu_api_key_de_resend"
RESEND_FROM_NAME="Fredy Fasbear Pr√©stamos"
RESEND_FROM_EMAIL="onboarding@resend.dev"

# Informaci√≥n de la Empresa
EMPRESA_NOMBRE="Fredy Fasbear Pr√©stamos"
EMPRESA_TELEFONO="+502 0000-0000"
EMPRESA_EMAIL="info@fredyfasbear.tech"
EMPRESA_DIRECCION="Guatemala, Guatemala"

# Node Environment
NODE_ENV="development"
```

### Frontend (.env)

Crea un archivo `.env` en la carpeta `FRONTEND/` con:

```env
# API Base URL
NUXT_PUBLIC_API_BASE="http://localhost:3001/api"
```

### Base de Datos

#### 1. Crear la base de datos

```bash
createdb fredy_fasbear_db
```

#### 2. Generar el cliente de Prisma

```bash
cd BACKEND
npm run db:generate
```

#### 3. Aplicar migraciones

```bash
npm run db:migrate
```

#### 4. Poblar con datos iniciales (opcional)

```bash
npm run db:seed
```

## üéÆ Uso

### Desarrollo

#### Iniciar Backend

```bash
cd BACKEND
npm run dev
```

El servidor estar√° disponible en `http://localhost:3001`

#### Iniciar Frontend

```bash
cd FRONTEND
npm run dev
```

La aplicaci√≥n estar√° disponible en `http://localhost:3000`

### Producci√≥n

#### Backend

```bash
cd BACKEND
npm start
```

#### Frontend

```bash
cd FRONTEND
npm run build
npm run start
```

## üìÅ Estructura del Proyecto

```
fredy-fasbear-prestamos/
‚îú‚îÄ‚îÄ BACKEND/
‚îÇ   ‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # Esquema de base de datos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/            # Migraciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.js               # Datos iniciales
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/          # Controladores de l√≥gica de negocio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/               # Definici√≥n de rutas API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/           # Middleware de autenticaci√≥n, validaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/             # Servicios (email, PDF, uploads)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/               # Configuraciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js               # Punto de entrada del servidor
‚îÇ   ‚îú‚îÄ‚îÄ uploads/                  # Archivos subidos
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ FRONTEND/
‚îÇ   ‚îú‚îÄ‚îÄ pages/                    # P√°ginas de la aplicaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/               # Panel de administraci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ empeno/              # M√≥dulo de pr√©stamos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ evaluador/           # Panel de evaluadores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collector/           # Panel de cobradores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tienda/              # E-commerce
‚îÇ   ‚îú‚îÄ‚îÄ components/              # Componentes reutilizables
‚îÇ   ‚îú‚îÄ‚îÄ composables/             # Composables de Vue
‚îÇ   ‚îú‚îÄ‚îÄ middleware/              # Middleware de rutas
‚îÇ   ‚îú‚îÄ‚îÄ plugins/                 # Plugins de Nuxt
‚îÇ   ‚îú‚îÄ‚îÄ assets/                  # Recursos est√°ticos
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ DOCUMENTACION/               # Documentaci√≥n del proyecto
‚îî‚îÄ‚îÄ SCRIPTS Y CONFIGURACION/    # Scripts √∫tiles
```

## üë• Roles de Usuario

### 1. Cliente
- Crear solicitudes de pr√©stamo
- Ver estado de solicitudes
- Firmar contratos digitalmente
- Realizar pagos
- Descargar recibos
- Comprar en tienda

### 2. Evaluador
- Recibir y evaluar solicitudes
- Realizar aval√∫os de art√≠culos
- Aprobar/rechazar solicitudes
- Generar contratos

### 3. Cobrador
- Ver pagos pendientes de validaci√≥n
- Validar/rechazar pagos
- Gestionar rutas de cobranza
- Ver historial de pagos

### 4. Administrador
- Acceso completo al sistema
- Gesti√≥n de usuarios y personal
- Configuraci√≥n de par√°metros del sistema
- Reportes y estad√≠sticas
- Gesti√≥n de backups
- Logs de auditor√≠a
- Configuraci√≥n de e-commerce

## üîë Credenciales por Defecto

Despu√©s de ejecutar el seed, puedes usar:

```
Administrador:
Email: admin@fredyfasbear.tech
Password: admin123

Evaluador:
Email: evaluador@fredyfasbear.tech
Password: evaluador123

Cobrador:
Email: cobrador@fredyfasbear.tech
Password: cobrador123

Cliente:
Email: cliente@fredyfasbear.tech
Password: cliente123
```

> ‚ö†Ô∏è **Importante**: Cambia estas contrase√±as en producci√≥n.

## üìö Scripts Disponibles

### Backend

```bash
npm run dev           # Modo desarrollo con nodemon
npm start             # Iniciar servidor en producci√≥n
npm run db:generate   # Generar cliente Prisma
npm run db:push       # Sincronizar schema sin migraci√≥n
npm run db:migrate    # Crear y aplicar migraci√≥n
npm run db:seed       # Poblar base de datos
npm run db:studio     # Abrir Prisma Studio
```

### Frontend

```bash
npm run dev           # Modo desarrollo
npm run build         # Build para producci√≥n
npm run preview       # Previsualizar build
npm run start         # Iniciar en producci√≥n
npm run generate      # Generar sitio est√°tico
npm run lint          # Verificar c√≥digo
npm run lint:fix      # Corregir errores de lint
```

## üîí Seguridad

- **Autenticaci√≥n JWT**: Tokens seguros con expiraci√≥n
- **Bcrypt**: Hashing de contrase√±as con salt
- **Rate Limiting**: Protecci√≥n contra ataques de fuerza bruta
- **Helmet**: Headers de seguridad HTTP
- **CORS**: Control de acceso entre dominios
- **Validaci√≥n de Datos**: Validaci√≥n en backend y frontend
- **Sanitizaci√≥n**: Prevenci√≥n de inyecci√≥n SQL y XSS

## üêõ Soluci√≥n de Problemas

### El backend no inicia

1. Verifica que PostgreSQL est√© corriendo
2. Verifica las credenciales en `.env`
3. Ejecuta `npm run db:generate`

### Error de conexi√≥n a base de datos

```bash
# Verifica que PostgreSQL est√© activo
systemctl status postgresql

# Reinicia PostgreSQL si es necesario
systemctl restart postgresql
```

### Problemas con migraciones

```bash
# Resetear base de datos (‚ö†Ô∏è elimina todos los datos)
npx prisma migrate reset

# Aplicar migraciones
npm run db:migrate
```

## üìÑ Licencia

Este proyecto est√° bajo la licencia **Creative Commons Attribution-NonCommercial-NoDerivs 4.0 International (CC BY-NC-ND 4.0)**.

Esto significa que puedes:
- ‚úÖ **Compartir**: Copiar y redistribuir el material en cualquier medio o formato

Bajo los siguientes t√©rminos:
- üìù **Atribuci√≥n (BY)**: Debes dar cr√©dito apropiado
- üö´ **No Comercial (NC)**: No puedes usar el material para fines comerciales
- üîí **Sin Obras Derivadas (ND)**: No puedes distribuir material modificado

Para m√°s detalles, consulta el archivo [LICENSE](LICENSE) o visita: https://creativecommons.org/licenses/by-nc-nd/4.0/

## üë®‚Äçüíª Autores

**Fredy Fasbear Industries**

Contacto: info@fredyfasbear.tech

---

<div align="center">

**Desarrollado con ‚ù§Ô∏è por Fredy Fasbear Industries**

</div>
